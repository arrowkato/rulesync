---
root: false
targets: ['*']
description: "TypeScript/Node.jsコーディング規約とベストプラクティス"
globs: ["src/**/*.ts", "src/**/*.js", "**/*.test.ts"]
---

# コーディング規約とベストプラクティス

## TypeScript規約

### 型安全性の徹底
- 常に明示的な型定義を使用
- `any`は禁止、代わりに`unknown`を使用
- `noUncheckedIndexedAccess`設定に従い、配列・オブジェクトアクセスではundefinedチェックを実施
- `exactOptionalPropertyTypes`設定に従い、オプショナルプロパティの型を厳密に定義

### 関数・変数の命名
- camelCase形式を使用
- 関数名は動詞から開始（例：`parseRuleFile`, `generateOutput`）
- 定数は`UPPER_SNAKE_CASE`
- 型定義は`PascalCase`

### インポート・エクスポート
- Named exportを優先（default exportは避ける）
- 相対インポートよりも絶対インポートを使用
- インポートの順序：Node.js内蔵 → 外部ライブラリ → 内部モジュール

## コードスタイル（Biome設定準拠）

### フォーマット
- インデント：スペース2個
- 行幅：100文字
- セミコロン：必須
- クォート：ダブルクォート
- 末尾カンマ：ES5形式

### 関数定義
- アロー関数よりも通常の関数宣言を優先
- 非同期処理は`async/await`を使用（Promiseチェーンは避ける）

## エラーハンドリング

### 例外処理
- カスタムエラーメッセージを提供
- ファイルパスや具体的な値を含める
- 早期リターンパターンを活用

### 検証
- 関数の入力値は必ず検証
- 型ガードを使用してランタイム安全性を確保

## テストコード

### 構造
- `*.test.ts`形式でテストファイルを作成
- 各関数に対応するテストケースを作成
- 正常ケース・異常ケースの両方をカバー

### 命名
- テスト関数名は`should + 期待動作`形式
- 具体的で理解しやすい名前を使用