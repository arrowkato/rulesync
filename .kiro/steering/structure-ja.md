# プロジェクト構造

## ソースコード構成

```
src/
├── cli/                    # コマンドラインインターフェース
│   ├── commands/          # 個別のCLIコマンド（init、generate、importなど）
│   └── index.ts          # Commander.jsセットアップを含むメインCLIエントリーポイント
├── core/                  # コアビジネスロジック
│   ├── generator.ts      # メインルール生成オーケストレーター
│   ├── parser.ts         # ルールファイル解析ロジック
│   ├── validator.ts      # ルール検証ロジック
│   ├── importer.ts       # 設定インポートロジック
│   └── mcp-*.ts         # MCPサーバー設定処理
├── generators/           # ツール固有のジェネレーター
│   ├── rules/           # 各AIツール用のルールファイルジェネレーター
│   └── mcp/             # MCP設定ジェネレーター
├── parsers/             # ツール固有の設定パーサー
├── types/               # TypeScript型定義
├── utils/               # 共有ユーティリティ
└── test-utils/          # テストユーティリティとモック
```

## 設定構造

### AIツール設定
各AIツールは独自の設定ディレクトリ構造を持ちます：
- `.cursor/` - Cursor IDEルールとMCP設定
- `.cline/` - ClineルールとMCP設定
- `.claude/` - Claude Codeメモリーとコマンド
- `.roo/` - Roo CodeルールとMCP設定
- `.gemini/` - Gemini CLIメモリーと設定
- `.github/` - GitHub Copilot指示
- `.kiro/` - Kiro IDEステアリングドキュメント

### コアファイル
- `.rulesync/` - ソースルール定義（YAMLフロントマター付きMarkdown）
- `.rulesyncignore` - 処理から除外するファイル
- `.mcp.json` - ルートMCPサーバー設定

## 命名規則

### ファイルとディレクトリ
- **ケバブケース** ファイルとディレクトリ名（`mcp-generator.ts`、`tool-targets.ts`）
- **パスカルケース** TypeScriptインターフェースと型
- **キャメルケース** 変数と関数
- **SCREAMING_SNAKE_CASE** 定数

### コード構成
- 各AIツールは`generators/`、`parsers/`、`types/`に専用モジュールを持つ
- ツール固有のロジックは分離され、一貫したパターンに従う
- 共有ユーティリティは`utils/`に集約
- テストファイルは`.test.ts`サフィックスを使用し、ソース構造をミラー

## 主要なアーキテクチャ原則

### 関心の分離
- **CLIレイヤー**: コマンド解析とユーザーインタラクション
- **コアレイヤー**: ビジネスロジックとオーケストレーション
- **ジェネレーターレイヤー**: ツール固有のファイル生成
- **パーサーレイヤー**: ツール固有の設定解析
- **型レイヤー**: スキーマ定義と検証

### プラグインパターン
各AIツールは一貫したインターフェースに従います：
- 設定作成用のジェネレーター関数
- 既存設定インポート用のパーサー関数
- ツール固有スキーマの型定義
- 生成と解析の両方のテストカバレッジ

### ファイル処理パイプライン
1. **解析** `.rulesync/`ディレクトリからルールファイルを解析
2. **検証** Zodスキーマに対して検証
3. **生成** ツール固有の設定を生成
4. **書き込み** 適切な出力ディレクトリに書き込み
5. **監視** 変更を監視（オプション）